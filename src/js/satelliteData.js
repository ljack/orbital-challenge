import {
    csv2JSON
}
from './csv.js';

export class SatelliteLocationData {
    constructor() {
        this.SEED = "";
        this.SATELLITE_POSITIONS_HEADER = "name,lat,lon,alt";
        this.SATELLITE_POSITIONS = `name,lat,lon,alt
SAT0,36.20355830226454,48.13703377339229,359.2479771000116
SAT1,30.77964873161345,-28.711708853429002,342.47692534683705
SAT2,82.03447348027447,-64.36686639561222,335.3947261893395
SAT3,-8.988902231761799,142.1610960003672,629.0397042922036
SAT4,-83.51330102365031,119.21050064075769,525.1837403451229
SAT5,-38.8346333542903,-175.53488681959934,609.7910635352318
SAT6,58.94067418487978,-138.46586436219042,588.938574483838
SAT7,-15.730062268272533,-6.823654528970451,575.0713773070536
SAT8,-28.82347164906922,81.40578252851532,599.5864459652598
SAT9,-47.55394726015829,0.9285718861989665,484.13567350912035
SAT10,50.78164526411865,-157.63630799243867,554.9388114941785
SAT11,61.12786810164016,-9.01711693824177,328.40597446843697
SAT12,67.08022039586155,-166.73320467881072,639.1103158064834
SAT13,43.53794951752079,28.946160515202195,635.9168389149887
SAT14,32.17020980766662,2.8429935653013843,623.3792713608332
SAT15,-24.3282098360648,124.2422211739862,596.3032776634826
SAT16,14.141474688186193,113.83796349942509,662.6586399241478
SAT17,-65.13026730470396,-33.87096022227101,432.29430053216004
SAT18,19.396137379872414,-140.63510282455348,380.6664360408779
SAT19,-3.738110528034767,-158.01971644278632,474.1328837479838`;

        this.ROUTE_HEADER = "route,lat1,lon1,lat2,lon2";
        this.ROUTE = ""; //  "ROUTE,40.7142700,-74.0059700,52.5243700,13.4105300";
    }

    update(rows) {
        // 1. row is seed, pos 0
        // rows 2 - 20 is satellite info
        // row 21 is route, pos 20
        this.SEED = rows[0];
        console.log("SEED=", this.SEED);

        this.ROUTE = this.ROUTE_HEADER + "\n" + rows[rows.length - 1];
        // ROUTE = ROUTE_HEADER + "\n" + ROUTE;

        console.log("ROUTE=", this.ROUTE);
        this.SATELLITE_POSITIONS = this.SATELLITE_POSITIONS_HEADER + "\n" + rows.splice(1, rows.length - 2).join("\n");
        console.log("SATELLITE_POSITIONS=", this.SATELLITE_POSITIONS);
        // kick the system and start working
        this._route = csv2JSON(this.ROUTE)[0];
        this._satData = csv2JSON(this.SATELLITE_POSITIONS);
    }

    set seed(seed) {

    }

    get seed() {
        return this.SEED;
    }

    route() {
        return this._route;
    }

    satData() {
        return this._satData;
    }
}
